---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import FeaturedPost from "../components/FeaturedPost.astro";
import LatestPosts from "../components/LatestPosts.astro";
import { getPosts } from "../lib/blogger";
import Categories from "../components/Categories.astro";
import Newsletter from "../components/Newsletter.astro";
import Missao from "../components/Missao.astro";

const posts = await getPosts();
const featuredPost = posts[0] ?? null;
const latestPosts = featuredPost ? posts.slice(1) : posts;

const totalPosts = posts.length;
const totalThemes = new Set(posts.flatMap((p) => p.labels ?? [])).size;
---

<Layout
  title="Caf\u00e9 Com F\u00e9 | Programacao, fe e proposito"
  description="Um blog sobre programacao, carreira e vida com Deus. Conteudos praticos para quem codifica com fe e vive com proposito."
>
  <main class="mx-auto max-w-6xl p-6 space-y-16">
    <Hero totalPosts={totalPosts} totalThemes={totalThemes} />
    <FeaturedPost post={featuredPost} />
    <LatestPosts posts={latestPosts} />
    <Missao />
    <Categories posts={posts} />
    <Newsletter />
  </main>
</Layout>
